<section>
  <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="default" color="#fff" type="ball-spin-fade-rotating" bdOpacity=0.5>

  </ngx-spinner>
  <div class="col-md-9 topspace">
    <div class="content">
      <div class="col-md-12">
        <div class="fomr_section">
          <h3 class="form_title"> Assign Driver</h3>
          <form [formGroup]="loadForm" (ngSubmit)="assignDriver()">

            <div class="row-fluid">
              <div class="form-group">
                  <label> Select From Global Drivers</label>
                
                <select formControlName="global" class="form-control"
                  [ngClass]="{ 'is-invalid': submitted && f.global.errors }" (change)='chnageGlobal($event)'>
                  <option value="" disabled>Select</option>
                  <option value="{{i}}" *ngFor='let driver of gloabal; let i = index'>{{driver.name}}</option>

                </select>
              </div>
            </div>
            <div class="row-fluid">
                <div class="form-group">
  
                  <h4 class="center">OR</h4>
                  
                </div>
              </div>

            <div class="row-fluid">
              <div class="col-md-6 none">
                <div class="form-group">
                  <label> Assign To Carrier</label>
                  <select formControlName="carrier" class="form-control"
                    [ngClass]="{ 'is-invalid': submitted && f.carrier.errors }"
                    (change)="setPreference($event.target.value);">
                    <option value="" disabled>Select</option>
                    <option value="1">Yes</option>
                    <option value="2">No</option>
                  </select>
                </div>
                <div *ngIf="submitted && f.carrier.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" f.carrier.errors.required">
                    Carrier Selection is required!
                  </p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Carrier</label>
                  <select formControlName="carrierId" class="form-control" (change)="getDriver($event.target.value,0,1)"
                    [ngClass]="{ 'is-invalid': submitted && f.carrierId.errors }">
                    <option value="" disabled>Select</option>
                    <option value="{{carrier.id}}" *ngFor='let carrier of carrierList'>{{carrier.legalName}}</option>

                  </select>
                </div>
                <div *ngIf="submitted && f.carrierId.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" f.carrierId.errors.required">
                    Carrier is required!
                  </p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Driver</label>
                  <select formControlName="driverId" class="form-control"
                    [ngClass]="{ 'is-invalid': submitted && f.driverId.errors }" (change)='chnage($event)'>
                    <option value="" disabled>Select</option>
                    <option value="{{driver.id}}" *ngFor='let driver of driverList'>{{driver.name}}</option>

                  </select>
                </div>
                <div *ngIf="submitted && f.driverId.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" f.driverId.errors.required">
                    Driver is required!
                  </p>
                </div>
              </div>

            </div>
            <div class="row-fluid">


              <div class="col-md-6" *ngIf='found'>
                <div class="form-group">
                  <label>Equptments List </label>
                  <ol>
                    <li *ngFor='let e of equp; let i = index'>
                      {{i+1}} : {{e.EquipName}}
                    </li>
                  </ol>
                </div>

              </div>

            </div>


            <div class="col-md-12" style="text-align:center;">
              <button type="submit " class="btn btn-default btn_back">Add</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>
