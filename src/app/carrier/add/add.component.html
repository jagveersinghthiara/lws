<section>
    <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="default" color="#fff" type="ball-spin-fade-rotating" bdOpacity=0.5>

      </ngx-spinner>
  <div class="col-md-9 topspace">
    <div class="content">
      <div class="col-md-12">
        <div class="fomr_section">
          <h3 class="form_title"> Add Customer</h3>  
          <a class="add_btn pointer" *ngIf="!useCsv" (click)="use('csv')" > <i class="glyphicon glyphicon-plus"></i> Use Csv</a>
          <a class="add_btn pointer"  *ngIf="useCsv" (click)="use('manually')" > <i class="glyphicon glyphicon-plus"></i>Add Manually</a>
<!-- 
          <button type="button" class="add_btn" *ngIf="!useCsv" (click)="use('csv')">Use Csv</button>
          <button type="button">Add Manually</button> -->

          <form [formGroup]="carrierForm" (ngSubmit)="addCarrier()" *ngIf="!useCsv">
            <div class="row-fluid">
              <div class="col-md-4">
                <div class="form-group">
                  <label> Legal Name </label>
                  <input type="text" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.legalName.errors }"
                    formControlName="legalName" placeholder="Enter Legal Name">
                </div>
                <div *ngIf="submitted && f.legalName.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" f.legalName.errors.required">
                    Legal Name is required!
                  </p>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label>DBA Name </label>
                  <input type="text" class="form-control" formControlName="dbaName" placeholder="Enter DBA Name"
                    [ngClass]="{ 'is-invalid': submitted && f.dbaName.errors }">
                </div>
                <div *ngIf="submitted && f.dbaName.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" f.dbaName.errors.required">
                    DBA Name is required!
                  </p>
                </div>
              </div>
          
              <div class="col-md-4">
                <div class="form-group">
                  <label> Email </label>
                  <input type="email" formControlName="email" class="form-control" placeholder="Enter Email"
                    [ngClass]="{ 'is-invalid': submitted && f.email.errors }">
                </div>
                <div *ngIf="submitted && f.email.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" f.email.errors.required">
                    Email is required!
                  </p>
                  <p class="error-message" *ngIf="f.email.errors.email">
                    Email must be a valid email address!
                  </p>
                </div>
              </div>
            </div>
            <div class="row-fluid">
              <div class="col-md-4">
                <div class="form-group">
                  <label>Address </label>
                  <input type="text" formControlName="address" class="form-control" placeholder="Enter Address"
                    [ngClass]="{ 'is-invalid': submitted && f.address.errors }">
                </div>
                <div *ngIf="submitted && f.address.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" f.address.errors.required">
                    Address is required!
                  </p>
                </div>
              </div>
            
              <div class="col-md-4">
                <div class="form-group">
                  <label> City</label>
                  <input type="text" class="form-control" formControlName="city" placeholder="Enter City"
                    [ngClass]="{ 'is-invalid': submitted && f.city.errors }">
                </div>
                <div *ngIf="submitted && f.city.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" f.city.errors.required">
                    City is required!
                  </p>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label> State</label>
                  <input type="text" class="form-control" formControlName="state" placeholder="Enter State"
                    [ngClass]="{ 'is-invalid': submitted && f.state.errors }">
                </div>
                <div *ngIf="submitted && f.state.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" f.state.errors.required">
                    State is required!
                  </p>
                </div>
              </div>

            </div>
            <div class="row-fluid">
              <div class="col-md-4">
                <div class="form-group">
                  <label>Fax </label>
                  <input type="text" class="form-control" formControlName="fax" placeholder="Enter Fax"
                    [ngClass]="{ 'is-invalid': submitted && f.fax.errors }">
                </div>
                <div *ngIf="submitted && f.fax.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" f.fax.errors.required">
                    Fax is required!
                  </p>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label> Zip</label>
                  <input type="text" class="form-control" formControlName="zip" placeholder="Enter Zip"
                    [ngClass]="{ 'is-invalid': submitted && f.zip.errors }">
                </div>
                <div *ngIf="submitted && f.zip.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" f.zip.errors.required">
                    Zip is required!
                  </p>
                  <p class="error-message" *ngIf=" f.zip.errors.pattern">
                    Zip must be valid !
                  </p>
                </div>
              </div>
          
              <div class="col-md-4">
                <div class="form-group">
                  <label>Phone </label>
                  <input type="text" class="form-control" formControlName="phone" placeholder="Enter Phone Number"
                    [ngClass]="{ 'is-invalid': submitted && f.phone.errors }">
                </div>
                <div *ngIf="submitted && f.phone.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" f.phone.errors.required">
                    Phone Number is required!
                  </p>
                  <p class="error-message" *ngIf=" f.phone.errors.pattern">
                    Phone Number must be valid !
                  </p>
                </div>

              </div>
            </div>

            <div class="row-fluid">
              <div class="col-md-4">
                <div class="form-group">
                  <label> Cell</label>
                  <input type="text" class="form-control" formControlName="cell" placeholder="Enter Cell">
                </div>
                <div *ngIf="submitted && f.cell.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" f.cell.errors.pattern">
                    Cell must be valid !
                  </p>
                </div>
              </div>
          
              <div class="col-md-4">
                <div class="form-group">
                  <label>Contact1 </label>
                  <input type="text" class="form-control" formControlName="contact1" placeholder="Enter Contact1">
                </div>
                <div *ngIf="submitted && f.contact1.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" f.contact1.errors.pattern">
                    Contact1 must be valid !
                  </p>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label> Contact2</label>
                  <input type="text" class="form-control" formControlName="contact2" placeholder="Enter Contact2">
                </div>
                <div *ngIf="submitted && f.contact2.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" f.contact2.errors.pattern">
                    Contact2 must be valid !
                  </p>
                </div>
              </div>
            </div>
            <div class="row-fluid">
              <div class="col-md-4">
                <div class="form-group">
                  <label>No of Trucks </label>
                  <input type="text" class="form-control" formControlName="noOfTrucks"
                    placeholder="Enter Number Of Trucks" [ngClass]="{ 'is-invalid': submitted && f.noOfTrucks.errors }">
                </div>
                <div *ngIf="submitted && f.noOfTrucks.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" f.noOfTrucks.errors.required">
                    No Of Trucks required!
                  </p>
                  <p class="error-message" *ngIf=" f.noOfTrucks.errors.pattern">
                    No Of Trucks must be valid !
                  </p>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label> Policy</label>
                  <input type="text" class="form-control" formControlName="policy" placeholder="Enter Policy">
                </div>
              </div>
          
              <div class="col-md-4">
                <div class="form-group">
                  <label>Docket </label>
                  <input type="text" class="form-control" formControlName="docket" placeholder="Enter Docket">
                </div>
              </div>
            </div>
            <div class="row-fluid">
              <div class="col-md-4">
                <div class="form-group">
                  <label> UsDot</label>
                  <input type="text" class="form-control" formControlName="usdot" placeholder="Enter UsDot">
                </div>
              </div>
              <div class="col-md-4">
                <label>  Status</label>
                <select formControlName="status" class="form-control" >
                  <option value = "" disabled>Select</option>
                  <option value = "1">Lead</option>
                  <option value = "2">Perspective</option>
                  <option value = "3">Customer</option>
                </select>
                <div *ngIf="submitted && f.status.errors" class="invalid-feedback">
                    <p class="error-message" *ngIf=" f.status.errors.required">
                        Status is required!
                      </p>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label>Commission</label>
                  <input type="text" class="form-control" formControlName="commission"
                    placeholder="Commission % " [ngClass]="{ 'is-invalid': submitted && f.commission.errors }"> %
                </div>
                <div *ngIf="submitted && f.commission.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" f.commission.errors.required">
                    Commission required!
                  </p>
                  <p class="error-message" *ngIf=" f.commission.errors.pattern">
                    Commission must be valid !
                  </p>
                </div>
                <div *ngIf="submitted && ComissionError" class="invalid-feedback">
                  <p class="error-message" *ngIf="ComissionError">
                    Commission required!
                  </p>
                 
                  
                </div>
              </div>
            </div>

     
            <div class="col-md-12" style="text-align:center;">
              <button type="submit " class="btn btn-default btn_back">Add</button>
            </div>
          </form>

        
          <form [formGroup]="carrierCsvForm" (ngSubmit)="addCarrierCsv()" *ngIf="useCsv">
            <div class="row-fluid">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Select csv file</label>
                  <input #file (change)="preview(file.files)" type="file" accept=".csv" class="form-control" formControlName="csv"
                    placeholder="Select csv" [ngClass]="{ 'is-invalid': submitted && ff.csv.errors }">
                </div>
                <div *ngIf="submitted && ff.csv.errors" class="invalid-feedback">
                  <p class="error-message" *ngIf=" ff.csv.errors.required">
                   File required!
                  </p>
                 
                </div>
              </div>
              
            </div>
            <div class="col-md-12" style="text-align:center;">
              <button type="submit " class="btn btn-default btn_back">Upload CSV</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>
